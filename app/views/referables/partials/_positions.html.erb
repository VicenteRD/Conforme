<% extra_parameters = (extra || '').split('-') %>
<% area = extra_parameters[0] == 'area' %>

<% exclude = extra_parameters[0] == 'except' ? extra_parameters[1] : ''%>

<% position = (extra_parameters.length >= 2 && exclude == '') ? extra_parameters[1] : '' %>



<div class="row" style="padding: 0 1px">
  <%= render partial: 'positions/chart', locals: {parent: position, exclude: exclude}, layout: false %>
</div>

<%= raw (area ? area_selector_style : position_selector_style) %>

<script>
    var classSelector = (true && <%= area %>) ? $('.area-position') : $('div.node');

    classSelector.click(function () {

        var selector = $(this).find('p');
        var result = processReferenceRowClick(
            $(this),
            selector.attr('data-id'),
            selector.html().trim()
        );

        if (result) {
            $('#positions-modal').modal('hide');
        }
    });
</script>